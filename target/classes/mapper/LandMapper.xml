<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.agri.platform.mapper.LandMapper">
    
    <!-- 标准CRUD方法 -->
    <select id="selectById" parameterType="java.lang.Long" resultType="com.agri.platform.entity.Land">
        SELECT * FROM land WHERE land_id = #{landId}
    </select>
    
    <insert id="insert" parameterType="com.agri.platform.entity.Land" useGeneratedKeys="true" keyProperty="landId">
        INSERT INTO land (farmer_id, land_name, area, location, status, create_time, update_time)
        VALUES (#{farmerId}, #{landName}, #{area}, #{location}, #{status}, now(), now())
    </insert>
    
    <update id="update" parameterType="com.agri.platform.entity.Land">
        UPDATE land SET 
            farmer_id = #{farmerId},
            land_name = #{landName},
            area = #{area},
            location = #{location},
            status = #{status},
            update_time = now()
        WHERE land_id = #{landId}
    </update>
    
    <delete id="deleteById" parameterType="java.lang.Long">
        DELETE FROM land WHERE land_id = #{landId}
    </delete>
    
    <!-- 根据农场主ID查询所有地块 -->
    <select id="selectByFarmerId" parameterType="java.lang.Long" resultType="com.agri.platform.entity.Land">
        SELECT * FROM land WHERE farmer_id = #{farmerId}
    </select>
    
    <!-- 根据地块ID查询地块信息 -->
    <select id="selectLandById" parameterType="java.lang.Long" resultType="com.agri.platform.entity.Land">
        SELECT * FROM land WHERE land_id = #{landId}
    </select>
</mapper>